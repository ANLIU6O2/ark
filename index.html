<!doctype html>
<html lang="zh-Hant">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>尋回榮耀：重建約櫃之旅（鶯歌陶匠之城篇）</title>
  <meta name="description" content="鶯歌陶匠之城 · 尋回榮耀 · 重建約櫃之旅｜任務流程、規則、道具、AB 關卡、最終同在任務完整整理" />

  <!-- Optional: Google Fonts (works online). If offline, it will fallback gracefully. -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Noto+Serif+TC:wght@400;600;700&family=Noto+Sans+TC:wght@400;600;700&display=swap" rel="stylesheet">

  <style>
    :root{
      --bg0:#07060a;
      --bg1:#0e0b12;
      --ink:#f2efe7;
      --muted:#cfc7b5;
      --gold:#d7b35d;
      --gold2:#b8903a;
      --clay:#b07a5a;
      --stone:#8c8f96;
      --wine:#7b2e3c;
      --ok:#6bd17c;
      --warn:#ffcc66;

      --card: rgba(18, 14, 22, .78);
      --card2: rgba(22, 17, 28, .78);
      --stroke: rgba(215,179,93,.22);
      --stroke2: rgba(242,239,231,.08);
      --shadow: 0 18px 60px rgba(0,0,0,.55);
      --blur: blur(10px);

      --radius: 18px;
      --radius2: 26px;

      --max: 1100px;
    }

    @keyframes pulse-gold {
      0% { box-shadow: 0 0 0 0 rgba(215, 179, 93, 0.7); }
      70% { box-shadow: 0 0 0 15px rgba(215, 179, 93, 0); }
      100% { box-shadow: 0 0 0 0 rgba(215, 179, 93, 0); }
    }
    .glow-icon {
      animation: pulse-gold 2s infinite;
      border: 2px solid rgba(215, 179, 93, 0.8) !important;
    }

    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      color:var(--ink);
      font-family: "Noto Sans TC", system-ui, -apple-system, Segoe UI, Roboto, "PingFang TC", "Microsoft JhengHei", sans-serif;
      background:
        radial-gradient(1200px 800px at 20% 10%, rgba(215,179,93,.08), transparent 55%),
        radial-gradient(1000px 700px at 90% 20%, rgba(176,122,90,.10), transparent 60%),
        radial-gradient(900px 600px at 40% 90%, rgba(123,46,60,.10), transparent 65%),
        linear-gradient(180deg, var(--bg0), var(--bg1) 40%, #06050a 100%);
      overflow-x:hidden;
    }

    /* Subtle grain */
    body:before{
      content:"";
      position:fixed; inset:0;
      pointer-events:none;
      background-image:url("https://images.unsplash.com/photo-1528825871115-3581a5387919?auto=format&fit=crop&w=1600&q=60");
      opacity:.06;
      filter: grayscale(100%) contrast(120%);
      mix-blend-mode: overlay;
      transform: scale(1.1);
    }

    /* Top hero background (ancient vibe) */
    .heroBg{
      position:absolute; inset:0 0 auto 0;
      height: 640px;
      background:
        linear-gradient(180deg, rgba(0,0,0,.74), rgba(0,0,0,.35) 45%, rgba(0,0,0,.88)),
        url("https://images.unsplash.com/photo-1526481280695-3c687fd5432c?auto=format&fit=crop&w=2000&q=60");
      background-size:cover;
      background-position:center;
      filter:saturate(.9) contrast(1.06);
      z-index:-2;
    }
    .heroBg:after{
      content:"";
      position:absolute; inset:0;
      background:
        radial-gradient(800px 500px at 50% 10%, rgba(215,179,93,.18), transparent 55%),
        radial-gradient(700px 500px at 30% 35%, rgba(176,122,90,.14), transparent 60%),
        radial-gradient(700px 520px at 80% 40%, rgba(123,46,60,.12), transparent 62%);
      mix-blend-mode: screen;
      opacity:.8;
    }

    a{color:var(--gold); text-decoration:none}
    a:hover{opacity:.9; text-decoration:underline}

    .wrap{max-width:var(--max); margin:0 auto; padding:0 18px 90px}
    .topPad{padding-top: 24px}

    /* Sticky nav */
    .nav{
      position:sticky; top:0;
      z-index:50;
      padding: 12px 0;
      backdrop-filter: var(--blur);
      background: linear-gradient(180deg, rgba(6,5,10,.86), rgba(6,5,10,.44));
      border-bottom: 1px solid rgba(215,179,93,.10);
    }
    .navInner{
      max-width:var(--max);
      margin:0 auto;
      padding: 0 18px;
      display:flex;
      align-items:center;
      gap:12px;
      justify-content:space-between;
    }
    .brand{
      display:flex; align-items:center; gap:12px;
      font-family:"Noto Serif TC", serif;
      letter-spacing:.5px;
    }
    .sigil{
      width:36px; height:36px;
      border-radius: 12px;
      background:
        radial-gradient(circle at 30% 30%, rgba(255,255,255,.22), transparent 45%),
        linear-gradient(145deg, rgba(215,179,93,.95), rgba(184,144,58,.65));
      box-shadow: 0 10px 25px rgba(215,179,93,.18);
      position:relative;
      overflow:hidden;
      animation: sigil-glow 3s ease-in-out infinite alternate;
    }
    .sigil:after{
      content:"";
      position:absolute; inset:-30%;
      background:
        conic-gradient(from 220deg, rgba(0,0,0,0), rgba(0,0,0,.22), rgba(0,0,0,0));
      opacity:.65;
      animation: spin 7s linear infinite;
    }
    @keyframes spin{to{transform:rotate(360deg)}}
    @keyframes sigil-glow {
      0% { box-shadow: 0 5px 15px rgba(215,179,93,.3); transform: scale(1); filter: brightness(1); }
      100% { box-shadow: 0 0 25px rgba(215,179,93,.8), 0 0 10px rgba(255,255,255,0.4); transform: scale(1.08); filter: brightness(1.2); }
    }

    .navLinks{
      display:flex; gap:10px; flex-wrap:wrap;
      justify-content:flex-end;
    }
    .chip{
      display:inline-flex;
      align-items:center;
      gap:8px;
      padding: 8px 12px;
      border-radius: 999px;
      border: 1px solid rgba(215,179,93,.18);
      background: rgba(18,14,22,.45);
      color: var(--ink);
      font-size: 13px;
      transition: transform .15s ease, background .15s ease, border-color .15s ease;
      user-select:none;
      white-space:nowrap;
    }
    .chip:hover{transform: translateY(-1px); background: rgba(18,14,22,.62); border-color: rgba(215,179,93,.28)}
    .chip span.dot{
      width:8px; height:8px; border-radius:50%;
      background: rgba(215,179,93,.85);
      box-shadow: 0 0 0 4px rgba(215,179,93,.12);
    }

    /* Hero */
    header.hero{
      padding: 36px 0 18px;
      position:relative;
    }
    .heroGrid{
      display:grid;
      grid-template-columns: 1.25fr .75fr;
      gap: 18px;
      align-items:stretch;
    }
    @media (max-width: 940px){
      .heroGrid{grid-template-columns: 1fr; }
    }
    .heroCard{
      border-radius: var(--radius2);
      background: linear-gradient(180deg, rgba(18,14,22,.76), rgba(18,14,22,.55));
      border: 1px solid rgba(215,179,93,.18);
      box-shadow: var(--shadow);
      backdrop-filter: var(--blur);
      padding: 22px 20px;
      position:relative;
      overflow:hidden;
    }
    .heroCard:before{
      content:"";
      position:absolute; inset:-2px;
      background:
        radial-gradient(700px 420px at 20% 0%, rgba(215,179,93,.16), transparent 60%),
        radial-gradient(700px 420px at 90% 50%, rgba(176,122,90,.12), transparent 62%);
      opacity:.9;
      pointer-events:none;
    }
    .heroTitle{
      position:relative;
      font-family:"Noto Serif TC", serif;
      font-weight:700;
      font-size: 34px;
      line-height: 1.25;
      margin: 2px 0 10px;
      letter-spacing:.6px;
    }
    .subtitle{
      position:relative;
      color: var(--muted);
      font-size: 15px;
      line-height: 1.7;
      margin: 0 0 16px;
    }

    .badgeRow{display:flex; gap:10px; flex-wrap:wrap; position:relative; margin-bottom: 16px;}
    .badge{
      border-radius: 999px;
      padding: 7px 12px;
      font-size: 12px;
      border: 1px solid rgba(242,239,231,.10);
      background: rgba(0,0,0,.22);
      color: rgba(242,239,231,.92);
    }
    .badge strong{color: var(--gold)}
    .heroQuote{
      position:relative;
      margin-top: 16px;
      padding: 14px 14px;
      border-left: 3px solid rgba(215,179,93,.55);
      background: rgba(0,0,0,.20);
      border-radius: 10px;
      color: rgba(242,239,231,.95);
      line-height:1.7;
      font-family:"Noto Serif TC", serif;
    }
    .heroQuote em{color: rgba(215,179,93,.92); font-style:normal; font-weight:600}

    .sideStack{display:flex; flex-direction:column; gap:14px}
    .miniCard{
      border-radius: var(--radius);
      background: linear-gradient(180deg, rgba(22,17,28,.76), rgba(22,17,28,.52));
      border: 1px solid rgba(215,179,93,.14);
      box-shadow: var(--shadow);
      backdrop-filter: var(--blur);
      padding: 16px 16px;
      position:relative;
      overflow:hidden;
    }
    .miniCard h3{
      margin: 0 0 10px;
      font-family:"Noto Serif TC", serif;
      letter-spacing:.5px;
      font-size: 16px;
    }
    .miniCard p, .miniCard li{
      color: var(--muted);
      font-size: 13px;
      line-height: 1.7;
    }
    .miniCard ul{margin:8px 0 0; padding-left: 18px}
    .miniCard .hint{
      margin-top: 10px;
      padding: 10px 10px;
      border-radius: 12px;
      border: 1px dashed rgba(215,179,93,.28);
      background: rgba(0,0,0,.18);
      color: rgba(242,239,231,.92);
      font-size: 12.5px;
      line-height:1.7;
    }

    /* Sections */
    section{
      margin-top: 18px;
      border-radius: var(--radius2);
      background: linear-gradient(180deg, rgba(18,14,22,.64), rgba(18,14,22,.44));
      border: 1px solid rgba(215,179,93,.12);
      box-shadow: var(--shadow);
      backdrop-filter: var(--blur);
      overflow:hidden;
    }
    .secHead{
      padding: 16px 18px;
      border-bottom: 1px solid rgba(242,239,231,.08);
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap: 14px;
    }
    .secHead h2{
      margin:0;
      font-family:"Noto Serif TC", serif;
      letter-spacing:.5px;
      font-size: 18px;
    }
    .secHead .tag{
      font-size:12px;
      color: rgba(242,239,231,.85);
      border: 1px solid rgba(215,179,93,.20);
      background: rgba(0,0,0,.18);
      padding: 7px 10px;
      border-radius: 999px;
      white-space:nowrap;
    }
    .secBody{padding: 16px 18px}
    .grid2{display:grid; grid-template-columns: 1fr 1fr; gap: 14px}
    @media (max-width: 900px){ .grid2{grid-template-columns:1fr} }

    .panel{
      border-radius: var(--radius);
      border: 1px solid rgba(242,239,231,.08);
      background: rgba(0,0,0,.18);
      padding: 14px 14px;
    }
    .panel h3{
      margin: 0 0 8px;
      font-size: 15px;
      font-family:"Noto Serif TC", serif;
      letter-spacing:.4px;
    }
    .panel p, .panel li{
      margin: 0;
      color: var(--muted);
      font-size: 13.5px;
      line-height: 1.8;
    }
    .panel ul{margin: 8px 0 0; padding-left: 18px}
    .divider{height:1px; background: rgba(242,239,231,.08); margin: 14px 0}

    /* Timeline */
    .timeline{
      display:grid;
      grid-template-columns: 1fr;
      gap: 10px;
      margin-top: 6px;
    }
    .tItem{
      display:flex;
      gap: 12px;
      align-items: center;
      padding: 12px;
      border-radius: 16px;
      border: 1px solid rgba(215,179,93,.14);
      background: rgba(0,0,0,.16);
    }
    .tTime{
      min-width: 80px;
      padding: 8px 10px;
      border-radius: 14px;
      border: 1px solid rgba(215, 179, 93, 0.4);
      background: linear-gradient(145deg, rgba(215, 179, 93, 0.15), rgba(18, 14, 22, 0.6));
      font-size: 13px;
      color: var(--gold);
      text-align:center;
      font-weight:700;
      box-shadow: 0 4px 15px rgba(215, 179, 93, 0.1);
      letter-spacing: 0.5px;
    }
    .tText{
      flex:1;
      color: var(--muted);
      font-size: 13.5px;
      line-height: 1.8;
    }
    .tText strong{color: rgba(242,239,231,.95)}
    .tText em{color: rgba(215,179,93,.92); font-style:normal; font-weight:600}

    /* Accordion (Tasks) */
    details.task{
      border-radius: var(--radius2);
      border: 1px solid rgba(215,179,93,.14);
      background: rgba(0,0,0,.18);
      overflow:hidden;
      margin-bottom: 12px;
    }
    details.task[open]{border-color: rgba(215,179,93,.24)}
    summary.taskSum{
      list-style:none;
      cursor:pointer;
      padding: 14px 14px;
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap: 12px;
      user-select:none;
    }
    summary.taskSum::-webkit-details-marker{display:none}
    .taskLeft{
      display:flex; gap: 12px; align-items:center; min-width:0;
    }
    .taskIcon{
      width:38px; height:38px;
      border-radius: 14px;
      display:grid; place-items:center;
      background:
        radial-gradient(circle at 30% 30%, rgba(255,255,255,.18), transparent 45%),
        linear-gradient(145deg, rgba(215,179,93,.92), rgba(184,144,58,.58));
      box-shadow: 0 12px 30px rgba(215,179,93,.12);
      flex:0 0 auto;
      position:relative;
      overflow:hidden;
    }
    .taskIcon:after{
      content:"";
      position:absolute; inset:-40%;
      background: conic-gradient(from 160deg, transparent, rgba(0,0,0,.22), transparent);
      opacity:.6;
      animation: spin 10s linear infinite;
    }
    .taskTitleWrap{min-width:0}
    .taskTitle{
      margin:0;
      font-family:"Noto Serif TC", serif;
      font-size: 16px;
      letter-spacing:.4px;
      line-height: 1.35;
    }
    .taskMeta{
      margin-top: 2px;
      color: rgba(242,239,231,.72);
      font-size: 12px;
      line-height: 1.4;
    }
    .taskRight{
      display:flex; gap:8px; align-items:center; flex-wrap: wrap;
      flex:0 1 auto;
      justify-content: flex-end;
    }
    .taskBody{
      padding: 0 14px 14px;
      color: var(--muted);
      font-size: 13.5px;
      line-height: 1.85;
    }
    .taskBody h4{
      margin: 12px 0 6px;
      color: rgba(242,239,231,.95);
      font-size: 14px;
      font-family:"Noto Serif TC", serif;
      letter-spacing:.3px;
    }
    .taskBody .note{
      margin-top: 10px;
      padding: 10px 12px;
      border-radius: 14px;
      border: 1px dashed rgba(215,179,93,.26);
      background: rgba(0,0,0,.16);
      color: rgba(242,239,231,.88);
    }

    /* Progress */
    .progressWrap{
      display:flex; gap: 12px; align-items:center; flex-wrap:wrap;
    }
    .bar{
      flex:1 1 260px;
      height: 12px;
      border-radius: 999px;
      background: rgba(242,239,231,.10);
      overflow:hidden;
      border: 1px solid rgba(242,239,231,.08);
    }
    .bar > i{
      display:block;
      height:100%;
      width:0%;
      background: linear-gradient(90deg, rgba(215,179,93,.95), rgba(107,209,124,.85));
      border-radius: 999px;
      box-shadow: 0 0 0 6px rgba(215,179,93,.08);
      transition: width .25s ease;
    }
    .checkRow{
      display:grid;
      grid-template-columns: 1fr;
      gap: 10px;
      margin-top: 12px;
    }
    @media (max-width: 860px){ .checkRow{grid-template-columns: 1fr 1fr} }
    .check{
      display:flex; gap:10px; align-items:flex-start;
      padding: 10px 10px;
      border-radius: 16px;
      border: 1px solid rgba(215,179,93,.14);
      background: rgba(0,0,0,.14);
    }
    .check input{margin-top:3px; transform: scale(1.1)}
    .check label{
      font-size: 13px;
      color: rgba(242,239,231,.92);
      line-height:1.6;
      cursor:pointer;
    }
    .check small{display:block; color: rgba(242,239,231,.68); font-size: 12px}

    /* Score calc */
    .scoreGrid{
      display:grid;
      grid-template-columns: 1fr 1fr;
      gap: 12px;
      margin-top: 10px;
    }
    @media (max-width: 900px){ .scoreGrid{grid-template-columns: 1fr} }
    .scoreBox{
      border-radius: var(--radius2);
      border: 1px solid rgba(215,179,93,.14);
      background: rgba(0,0,0,.16);
      padding: 14px;
    }
    .scoreBox h3{
      margin: 0 0 10px;
      font-size: 15px;
      font-family:"Noto Serif TC", serif;
      letter-spacing:.4px;
    }
    .fields{
      display:grid;
      grid-template-columns: 1fr 1fr;
      gap: 10px;
    }
    @media (max-width: 540px){ .fields{grid-template-columns:1fr} }
    .field{
      display:flex; flex-direction:column; gap: 6px;
    }
    .field label{
      font-size: 12px;
      color: rgba(242,239,231,.78);
    }
    .field input, .field select{
      width:100%;
      padding: 10px 10px;
      border-radius: 14px;
      border: 1px solid rgba(242,239,231,.10);
      background: rgba(18,14,22,.55);
      color: rgba(242,239,231,.95);
      outline:none;
    }
    .field input:focus, .field select:focus{border-color: rgba(215,179,93,.28)}
    .scoreLine{
      margin-top: 12px;
      display:flex;
      align-items:center;
      justify-content:space-between;
      padding: 10px 12px;
      border-radius: 16px;
      border: 1px solid rgba(242,239,231,.10);
      background: rgba(18,14,22,.48);
      color: rgba(242,239,231,.92);
    }
    .scoreLine strong{color: var(--gold); font-size: 18px}

    .btnRow{display:flex; gap:10px; flex-wrap:wrap; margin-top: 12px}
    .btn{
      cursor:pointer;
      border-radius: 999px;
      padding: 10px 12px;
      border: 1px solid rgba(215,179,93,.22);
      background: rgba(0,0,0,.18);
      color: rgba(242,239,231,.92);
      font-weight:600;
      transition: transform .12s ease, background .12s ease, border-color .12s ease;
      user-select:none;
    }
    .btn:hover{transform: translateY(-1px); background: rgba(0,0,0,.28); border-color: rgba(215,179,93,.32)}
    .btn.primary{
      background: linear-gradient(145deg, rgba(215,179,93,.92), rgba(184,144,58,.62));
      border-color: rgba(215,179,93,.30);
      color: rgba(15,10,18,.95);
    }

    /* Footer */
    footer{
      margin-top: 18px;
      color: rgba(242,239,231,.70);
      text-align:center;
      font-size: 12px;
      line-height:1.7;
      padding: 18px 0 0;
    }

    /* Mobile Optimization */
    @media (max-width: 768px){
      .navInner{
        display: grid;
        gap: 8px;
        padding-bottom: 4px;
      }
      .navLinks{
        justify-content: flex-start;
        flex-wrap: nowrap;
        overflow-x: auto;
        padding-bottom: 8px;
        width: 100%;
        mask-image: linear-gradient(to right, black 95%, transparent 100%);
        -webkit-mask-image: linear-gradient(to right, black 95%, transparent 100%);
      }
      .navLinks::-webkit-scrollbar{ display:none }
      
      .heroBg{ height: 420px; }
      .heroTitle{ font-size: 26px; }
      
      .grid2, .checkRow, .scoreGrid, .fields{
        grid-template-columns: 1fr;
      }
      
      .secHead{
        flex-direction: column;
        align-items: flex-start;
        gap: 8px;
      }
      
      .tItem{
        flex-direction: column;
        align-items: flex-start;
      }
      .tTime{
        text-align: center;
        padding: 4px 10px;
        width: auto;
        display: inline-block;
      }
      
      .btnRow{
        flex-direction: column;
      }
      .btn{
        width: 100%;
        justify-content: center;
        text-align: center;
      }
      
      summary.taskSum {
        flex-direction: column;
        align-items: flex-start;
        gap: 10px;
      }
      .taskRight {
        justify-content: flex-start;
        width: 100%;
      }
    }

    /* Print */
    @media print{
      .nav, .btnRow, .heroBg{display:none !important}
      body:before{display:none}
      body{background:#fff; color:#111}
      section, .heroCard, .miniCard{
        box-shadow:none !important;
        background:#fff !important;
        border:1px solid #ddd !important;
        backdrop-filter:none !important;
      }
      a{color:#111}
    }
  </style>
</head>

<body>
  <div id="loginModal" style="position:fixed; inset:0; background:#07060a; z-index:9999; display:flex; flex-direction:column; align-items:center; justify-content:center; gap:20px;">
    <h2 style="color:#d7b35d; font-family:'Noto Serif TC', serif;">尋回榮耀：重建約櫃之旅</h2>
    <div style="display:flex; flex-direction:column; gap:15px; width:100%; max-width:300px;">
      <select id="loginTeam" style="padding:12px; font-size:16px; border-radius:8px; border:1px solid #d7b35d; background:#111; color:#fff;">
        <option value="A">A組</option>
        <option value="B">B組</option>
      </select>
      <input type="password" id="loginPass" placeholder="輸入密碼" style="padding:12px; font-size:16px; border-radius:8px; border:1px solid #d7b35d; background:#111; color:#fff;">
      <button id="btnLogin" style="padding:12px; font-size:16px; cursor:pointer; background:#d7b35d; border:none; border-radius:8px; font-weight:bold;">登入</button>
    </div>
    <p id="loginMsg" style="color:#ffcc66; font-size:14px;"></p>
  </div>
  <div class="heroBg" aria-hidden="true"></div>

  <!-- Sticky Navigation -->
  <div class="nav">
    <div class="navInner">
      <div class="brand">
        <div class="sigil" aria-hidden="true"></div>
        <div>
          <div style="font-weight:700; font-size:14px; line-height:1.15;">尋回榮耀 · 重建約櫃之旅</div>
          <div style="font-size:12px; color: rgba(242,239,231,.70); line-height:1.2;">鶯歌陶匠之城篇</div>
        </div>
      </div>
      <div class="navLinks">
        <a class="chip" href="#intro"><span class="dot"></span>總覽</a>
        <a class="chip" href="#story"><span class="dot"></span>約櫃故事</a>
        <a class="chip" href="#props"><span class="dot"></span>道具清單</a>
        <a class="chip" href="#flow"><span class="dot"></span>75分鐘流程</a>
        <a class="chip" href="#rules"><span class="dot"></span>規則</a>
        <a class="chip" href="#tasks"><span class="dot"></span>AB任務</a>
        <a class="chip" href="#presence"><span class="dot"></span>最終同在</a>
        <a class="chip" href="#score"><span class="dot"></span>分數計算</a>
      </div>
    </div>
  </div>

  <div class="wrap topPad">

    <!-- HERO -->
    <header class="hero" id="intro">
      <div class="heroGrid">
        <div class="heroCard">
          <div class="badgeRow">
            <div class="badge"><strong>主題</strong>：尋回榮耀：重建約櫃之旅（鶯歌陶匠之城篇）</div>
            <div class="badge"><strong>角色</strong>：護送約櫃的隊伍（A / B 兩隊）</div>
            <div class="badge"><strong>核心</strong>：不是辯論，是「一起動手、一起祝福、一起禱告」</div>
          </div>

          <h1 class="heroTitle">活動任務：尋回榮耀：重建約櫃之旅（鶯歌陶匠之城篇）</h1>
          <p class="subtitle">
            鶯歌是一座「陶」的城市：泥土被火煉、被塑形、成為器皿。今天你們兩隊要扮演「護送約櫃的隊伍」，在老街裡找回約櫃內的四樣見證之物，並完成最後一項任務：把神的同在帶到一位還不認識耶穌的人面前——不是用辯論，而是用「一起動手、一起祝福、一起禱告」的方式，把福音變成一個真實的相遇。
          </p>

          <div class="heroQuote">
            <div>「約櫃不是神本身，卻是神選擇與人相會的地方。」</div>
            <div style="margin-top:8px;">
              你們要做的，不只是完成任務，<em>而是一起學習怎麼護送神的同在同行</em>。
                        </div>
                      </div>
            
                                <!-- YouTube Insert -->
                                <div style="margin-top: 16px; border-radius: 12px; overflow: hidden; border: 1px solid rgba(215,179,93,.25); box-shadow: 0 10px 30px rgba(0,0,0,.4);">
                                  <iframe width="100%" height="100%" src="https://www.youtube.com/embed/bZbPO40QIGI" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen style="display: block; aspect-ratio: 16/9;"></iframe>
                                </div>
                      
                                <!-- Video Insert -->
                                <div style="margin-top: 16px; border-radius: 12px; overflow: hidden; border: 1px solid rgba(215,179,93,.25); box-shadow: 0 10px 30px rgba(0,0,0,.4);">
                                  <video controls playsinline preload="metadata" style="width: 100%; display: block; aspect-ratio: 16/9; background: #000;">
                                    <source src="media/製作約櫃神聖啟示影片.mp4" type="video/mp4">
                                    您的瀏覽器不支援影片播放。
                                  </video>
                                </div>                    </div>
            
                    <div class="sideStack">
          <div class="miniCard">
            <h3>今日目標</h3>
            <p>
              在陶匠之城的街巷裡，把「立約、供應、扶持、敬畏」找回來，最後讓同在走向一個人——用尊重與祝福，讓福音成為真實相遇。
            </p>
            <div class="hint">
              小提醒：你們是在公共場域做福音互動——把「尊重」放在第一句；拒絕就走，這反而最像耶穌。別把路人當 KPI：把他當「人」。
            </div>
          </div>

          <div class="miniCard">
            <h3>快速操作指引</h3>
            <ul>
              <li>每完成一關：拍照或 10–20 秒影片傳群組，或在群組說「過關」。</li>
              <li>每關必須全員參與：每人要出現在影片／照片中，或至少要有一句台詞/一句禱告/一句分享。</li>
              <li>任務卡照順序完成：禁止跳關遊玩。</li>
            </ul>
          </div>
        </div>
      </div>
    </header>

    <!-- STORY -->
    <section id="story">
      <div class="secHead">
        <h2>約櫃的故事：我們為什麼要護送它？</h2>
        <div class="tag">時代背景 · 神的同在 · 立約的記號</div>
      </div>
      <div class="secBody">
        <!-- Video Insert -->
        <div style="margin-bottom: 18px; border-radius: 12px; overflow: hidden; border: 1px solid rgba(215,179,93,.25); box-shadow: 0 10px 30px rgba(0,0,0,.4);">
          <video controls playsinline preload="metadata" style="width: 100%; display: block; aspect-ratio: 16/9; background: #000;">
            <source src="media/聖經約櫃運送影片製作.mp4" type="video/mp4">
            您的瀏覽器不支援影片播放。
          </video>
        </div>

        <div class="panel">
          <p>
            在以色列的歷史中，有一個不是武器、不是王權、卻讓人敬畏的器物——約櫃。約櫃不是神本身，卻是神選擇與人相會的地方。
            在約櫃裡，放著三樣東西，每一樣都不是榮耀的象徵，而是人與神關係的見證。
          </p>
        </div>

        <div class="grid2" style="margin-top:14px;">
          <div class="panel">
            <h3>第一樣：十誡的石版</h3>
            <p>
              那是神親手寫下的誡命。不是為了限制人，而是告訴人：我們怎麼在關係中活得不彼此傷害。十誡提醒以色列人——你們不是靠感覺走在一起，你們是靠「立約」同行。
            </p>
          </div>
          <div class="panel">
            <h3>第二樣：嗎哪的罐子</h3>
            <p>
              那是一小罐曠野中的食物。嗎哪不能囤，只能一天收一天。它記念的不是豐盛，而是：在最不確定的時候，神仍然供應。不是一次給完，而是每天剛剛好。
            </p>
          </div>
          <div class="panel">
            <h3>第三樣：亞倫發芽的杖</h3>
            <p>
              那原本只是一根乾枯的木頭，卻在眾人面前發芽、開花、結果。這不是為了證明亞倫比較厲害，而是為了告訴大家：被神揀選的人，不該被消耗，而是被保護。
            </p>
          </div>
          <div class="panel">
            <h3>約櫃本身：敬畏與順服</h3>
            <p>
              約櫃不能被隨便搬動，更不能用自己的方式抬。大衛曾因為沒有照神的方式搬運約櫃，付上極重的代價。約櫃提醒人一件事：神的同在不是拿來利用的，而是要被敬畏、被順服、被彼此守護的。
            </p>
          </div>
        </div>

        <div class="divider"></div>

        <div class="panel">
          <h3>那今天，為什麼是你們？</h3>
          <p>
            今天，我們來到鶯歌——一座關於陶、關於等待、關於被火燒過才成為器皿的城市。
            陶土不是一開始就好看，器皿不是一開始就能用。它們都要經過：被塑形、被修剪、被放進火裡，才成為能承載重量的器皿。
            今天的你們，就像這些器皿。而你們要做的，不只是完成任務，而是一起學習怎麼護送神的同在同行。
          </p>
        </div>
      </div>
    </section>

    <!-- PROPS -->
    <section id="props">
      <div class="secHead">
        <h2>準備的道具</h2>
        <div class="tag">物資 · 任務卡 · 封印卡 · 同在卡</div>
      </div>
      <div class="secBody">

        <div style="margin-bottom: 18px; border-radius: 12px; overflow: hidden; border: 1px solid rgba(215,179,93,.25); box-shadow: 0 10px 30px rgba(0,0,0,.4);">
          <video controls playsinline preload="metadata" style="width: 100%; display: block; aspect-ratio: 16/9; background: #000;">
            <source src="media/製作約櫃的影片生成.mp4" type="video/mp4">
            您的瀏覽器不支援影片播放。
          </video>
        </div>
        <div class="grid2">
          <div class="panel">
            <h3>道具清單（務必完整）</h3>
            <ul>
              <li>A 組任務卡 5 張、B 組任務卡 5 張（放進積木袋）</li>
              <li>四樣元素的「封印卡」（十誡 / 嗎哪 / 發芽的杖 / 約櫃）各 1 張（A、B 各一套）</li>
              <li>最後的「同在卡」各 1 張（A、B 各一張）</li>
              <li>兩組各一包積木（已準備）</li>
              <li>每組 5 支筆、5 張小紙（便條紙）</li>
            </ul>
          </div>
          <div class="panel">
            <h3>所有人準備好（開始前必做）</h3>
            <ul>
              <li>a. 活動開始時：把袋子裡面所有活動任務卡拿出來仔細閱讀；閱讀完讓大家知道所有活動詳細內容是什麼；後續請務必按照任務卡順序達成任務，禁止跳關遊玩。</li>
              <li>b. 閱讀完後：把所有資料放回積木袋子裡，由隊長負責攜帶！</li>
            </ul>
            <div class="hint" style="margin-top:10px;">
              回傳證據方式：每完成一關，A/B 組把照片或 10–20 秒影片傳到群組，或在群組說過關。
            </div>
          </div>
        </div>

        <div class="divider"></div>

        <div class="panel">
          <h3>準備費用</h3>
          <p>
            每人 100 元台幣（每組至多 500 元，用來購買屬於你們的約櫃，放置進入你們的積木袋）。
          </p>
          <p style="margin-top:8px;">
            尊重路人：找人前先說「可以耽誤你幾分鐘嗎？不方便完全沒關係。」
          </p>
        </div>
      </div>
    </section>

    <!-- FLOW -->
    <section id="flow">
      <div class="secHead">
        <h2>75 分鐘流程</h2>
        <div class="tag">時間軸 · 移動含計時 · 最終同在</div>
      </div>
      <div class="secBody">
        <div class="timeline">
          <div class="tItem">
            <div class="tTime">10 分</div>
            <div class="tText"><strong>開場＋分組＋規則</strong>：說明任務、確認順序、隊長保管積木袋。</div>
          </div>
          <div class="tItem">
            <div class="tTime">50 分</div>
            <div class="tText"><strong>四元素任務</strong>（每關 10 分，含移動）：依任務卡順序完成 <em>十誡石版</em>、<em>嗎哪的罐子</em>、<em>亞倫發芽的杖</em>、<em>約櫃</em>。</div>
          </div>
          <div class="tItem">
            <div class="tTime">15 分</div>
            <div class="tText"><strong>最終任務</strong>：找非基督徒一起組教堂積木＋祝福禱告＋送禮（把同在帶到人面前）。</div>
          </div>
        </div>
      </div>
    </section>

    <!-- RULES + PROGRESS -->
    <section id="rules">
      <div class="secHead">
        <h2>規則（務必遵守）＆完成進度</h2>
        <div class="tag">全員參與 · 不跳關 · 公共場域尊重</div>
      </div>
      <div class="secBody">
        <div class="grid2">
          <div class="panel">
            <h3>核心規則</h3>
            <ul>
              <li>每關必須全員參與：每人都要出現在影片／照片中，或至少要有一句台詞/一句禱告/一句分享。</li>
              <li>任務卡照順序完成：禁止跳關遊玩。</li>
              <li>回傳證據：每完成一關，A/B 組把照片或 10–20 秒影片傳到群組，或在群組說過關。</li>
              <li>尊重路人：找人前先說「可以耽誤你幾分鐘嗎？不方便完全沒關係。」</li>
            </ul>
          </div>

          <div class="panel">
            <h3>進度條（可勾選，會自動記住）</h3>
            <div class="progressWrap">
              <div class="bar" aria-label="progress bar"><i id="pbar"></i></div>
              <div style="min-width:150px; text-align:right;">
                <div style="font-size:12px; color: rgba(242,239,231,.72);">完成度</div>
                <div style="font-weight:700; letter-spacing:.3px;"><span id="pnum">0</span>/5</div>
              </div>
            </div>
            
            <!-- Opponent Progress (Requirement 3) -->
            <div class="progressWrap" style="margin-top:8px; opacity:0.8;">
               <div style="font-size:13px; color:#cfc7b5; min-width:80px;">敵隊進度</div>
               <div class="bar" style="border-color:rgba(184,144,58,.3);"><i id="oppBar" style="width:0%; background: linear-gradient(90deg, #b8903a, #ff6666);"></i></div>
            </div>

            <div class="checkRow" role="group" aria-label="task completion checklist">
              <div class="check">
                <input type="checkbox" id="c1" data-key="ab1">
                <label for="c1">AB1 十誡石版<small>10 條盟約＋影片＋拍照</small></label>
              </div>
              <div class="check">
                <input type="checkbox" id="c2" data-key="ab2">
                <label for="c2">AB2 嗎哪的罐子<small>以物易物 ≥ 3 次</small></label>
              </div>
              <div class="check">
                <input type="checkbox" id="c3" data-key="ab3">
                <label for="c3">AB3 亞倫發芽的杖<small>發芽/開花/結果 各 3 張</small></label>
              </div>
              <div class="check">
                <input type="checkbox" id="c4" data-key="ab4">
                <label for="c4">AB4 約櫃<small>買容器＋路人抬約櫃合照</small></label>
              </div>
              <div class="check">
                <input type="checkbox" id="c5" data-key="ab5">
                <label for="c5">AB5 神的同在<small>一起組教堂＋祝福禱告＋送出</small></label>
              </div>
            </div>

            <div class="btnRow">
              <button class="btn" id="resetProgress" type="button">清除勾選記錄</button>
              <button class="btn primary" type="button" onclick="window.print()">列印（A4 模式）</button>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- TASKS -->
    <section id="tasks">
      <div class="secHead">
        <h2>A、B 組 6 個任務（完整內容）</h2>
        <div class="tag">AB1～AB6 · 目標 · 故事設定 · 分數 · 證據</div>
      </div>

      <div class="secBody">

        <!-- AB1 -->
        <details class="task" open>
          <summary class="taskSum">
            <div class="taskLeft">
              <div class="taskIcon" aria-hidden="true">Ⅰ</div>
              <div class="taskTitleWrap">
                <div class="taskTitle">AB1 十誡石版｜「陶匠之城的 10 條盟約」</div>
                <div class="taskMeta">目標：建立團隊更深認識｜場景：老街「陶/匠/器皿」視覺元素</div>
              </div>
            </div>
            <div class="taskRight">
              <div class="pill gold">基本 50 分</div>
              <div class="pill">先上傳 +10</div>
              <div class="pill">加分：額外盟約 +5/條</div>
            </div>
          </summary>

          <div class="taskBody">
            <h4>目標：建立團隊更深認識</h4>
            <p>
              在老街找到「跟陶/匠/器皿有關」的視覺元素（招牌、陶藝裝置、牆面、窯的意象都算；不必店家開）。
              全隊一起寫下「屬於你們的 2026 年 10 條盟約」，透過彼此鼓勵在這一年中一同完成（一人寫 2 個，例如：穩定讀經一個月、學習會某項才藝、達成什麼目標…）。
              每條盟約後面要加一句「為什麼」（讓大家了解背後的信念）。
            </p>

            <h4>拍攝與回傳</h4>
            <ul>
              <li>在「陶/匠/器皿」視覺元素前拍 20 秒影片：拿著盟約紙每人念兩條＋一句原因（共 5 人，剛好 10 條；題目叫 10 條，建議 10 條更有儀式感）。</li>
              <li>同時將你們的盟約紙拍照上傳。</li>
            </ul>

            <h4>分數計算</h4>
            <ul>
              <li>完整完成：50 分</li>
              <li>先完成且全組影片先上傳：+10 分</li>
              <li>加分項：每個人最多可以額外再寫一條盟約，每一條額外 +5 分</li>
            </ul>

            <div class="note">
              過關證據：影片＋盟約紙拍照上傳（請務必將盟約紙收好，最後我們會需要你放進約櫃裡面）。
            </div>

            <!-- Video Insert -->
            <div style="margin-top: 16px; border-radius: 12px; overflow: hidden; border: 1px solid rgba(215,179,93,.25); box-shadow: 0 10px 30px rgba(0,0,0,.4);">
              <video controls playsinline preload="metadata" style="width: 100%; display: block; aspect-ratio: 16/9; background: #000;">
                <source src="media/製作十誡神聖影片.mp4" type="video/mp4">
                您的瀏覽器不支援影片播放。
              </video>
            </div>
          </div>
        </details>

        <!-- AB2 -->
        <details class="task">
          <summary class="taskSum">
            <div class="taskLeft">
              <div class="taskIcon" aria-hidden="true">Ⅱ</div>
              <div class="taskTitleWrap">
                <div class="taskTitle">AB2 嗎哪的罐子｜「在鶯歌找『上帝的供應』」</div>
                <div class="taskMeta">以物易物 ≥ 3 次｜把祝福擴大｜最後放進約櫃比較價值</div>
              </div>
            </div>
            <div class="taskRight">
              <div class="pill gold">勝方 60 分</div>
              <div class="pill">另一方 50 分</div>
            </div>
          </summary>

          <div class="taskBody">
            <h4>故事設定（你可以直接念）</h4>
            <p>
              鶯歌是一座陶的城市。陶不是一拿到就有用，它要 等、被塑形、進火裡、裂過、再成為器皿。
              嗎哪也是一樣——神給的供應，常常不是一次到位，而是每天一點、剛剛好。
              今天你們要在鶯歌老街找到「神如何在等待、過程、破碎中供應你們」的證據。
            </p>

            <h4>目標</h4>
            <p>
              你們活動積木袋子裡面有一張聖經小卡，這是上帝給你們的祝福。
              請你們透過這樣祝福，想辦法讓這份祝福擴大。
              擴大的方式：以這一張卡片開始，尋找路人或店家進行以物易物，請進行 3 次以上（可以更多）。
            </p>

            <h4>紀錄方式</h4>
            <ul>
              <li>每次交換完的物品拍照記錄（但不用上傳到群組）。</li>
              <li>最終競賽結束時：將交換得到的物品放置在你們的約櫃中。</li>
              <li>比較兩邊：看誰能夠透過上帝的祝福盡可能擴張最大效益（最有價值）。</li>
            </ul>

            <h4>分數</h4>
            <ul>
              <li>物品價值/效益較高者：60 分</li>
              <li>另一組：50 分</li>
            </ul>

            <!-- Video Insert -->
            <div style="margin-top: 16px; border-radius: 12px; overflow: hidden; border: 1px solid rgba(215,179,93,.25); box-shadow: 0 10px 30px rgba(0,0,0,.4);">
              <video controls playsinline preload="metadata" style="width: 100%; display: block; aspect-ratio: 16/9; background: #000;">
                <source src="media/聖經馬拿罐子影片製作.mp4" type="video/mp4">
                您的瀏覽器不支援影片播放。
              </video>
            </div>
          </div>
        </details>

        <!-- AB3 -->
        <details class="task">
          <summary class="taskSum">
            <div class="taskLeft">
              <div class="taskIcon" aria-hidden="true">Ⅲ</div>
              <div class="taskTitleWrap">
                <div class="taskTitle">AB3 亞倫發芽的杖｜「發芽、開花、結果」</div>
                <div class="taskMeta">找陶瓷器圖案：發芽×3、開花×3、結果×3｜相簿名稱固定</div>
              </div>
            </div>
            <div class="taskRight">
              <div class="pill gold">先完成 60 分</div>
              <div class="pill">後完成 50 分</div>
              <div class="pill">缺-3/張｜多+3/張</div>
            </div>
          </summary>

          <div class="taskBody">
            <h4>故事設定</h4>
            <p>
              亞倫的杖本來只是乾枯的木頭，但神讓它在眾人面前 發芽、開花、結果，
              不是為了證明他多厲害，而是證明——被神揀選的人，值得被保護、被支持，而不是被消耗。
              今天你們要在「陶匠之城」找幾個生命的記號，並在這個地方，透過照片記錄下來。
            </p>

            <h4>目標</h4>
            <p>
              以小組行動，在老街尋找各個有關陶瓷相關或有陶瓷器的店家，找到具有「發芽、開花、結果」圖案的陶瓷器：
            </p>
            <ul>
              <li>發芽圖案：3 個</li>
              <li>開花圖案：3 個</li>
              <li>結果圖案：3 個</li>
              <li>總共：9 張照片</li>
            </ul>

            <h4>相簿規範</h4>
            <ul>
              <li>請建立相簿名稱：「亞倫發芽的杖」</li>
              <li>將照片放入相簿中</li>
              <li>每間店限定最多：發芽、開花、結果各 1 張</li>
              <li>因此最少要尋找 3 家店以上</li>
            </ul>

            <h4>分數</h4>
            <ul>
              <li>先完成：60 分</li>
              <li>後完成：50 分</li>
              <li>每少一張：減 3 分；每多一張：加 3 分（以此類推）</li>
            </ul>

            <!-- Video Insert -->
            <div style="margin-top: 16px; border-radius: 12px; overflow: hidden; border: 1px solid rgba(215,179,93,.25); box-shadow: 0 10px 30px rgba(0,0,0,.4);">
              <video controls playsinline preload="metadata" style="width: 100%; display: block; aspect-ratio: 16/9; background: #000;">
                <source src="media/亞倫的杖：神聖啟示影片製作.mp4" type="video/mp4">
                您的瀏覽器不支援影片播放。
              </video>
            </div>
          </div>
        </details>

        <!-- AB4 -->
        <details class="task">
          <summary class="taskSum">
            <div class="taskLeft">
              <div class="taskIcon" aria-hidden="true">Ⅳ</div>
              <div class="taskTitleWrap">
                <div class="taskTitle">AB4 約櫃｜「聖潔護送：不可用自己的方式扛約櫃」</div>
                <div class="taskMeta">用 500 元買「約櫃容器」｜把物品放入｜找路人抬約櫃合照</div>
              </div>
            </div>
            <div class="taskRight">
              <div class="pill gold">先完成 60 分</div>
              <div class="pill">後完成 50 分</div>
            </div>
          </summary>

          <div class="taskBody">
            <h4>故事設定</h4>
            <p>
              約櫃不是普通的物件，它象徵神的同在。不是「力氣大就好」，也不是「效率最快就對」，
              而是照神的方式、彼此配合，才能前行；而裡面的內容一樣都不能少。
            </p>

            <h4>目標</h4>
            <p>
              目前你們已蒐集十誡版（十個盟約便條紙）、嗎哪的罐子（以物易物交換來的物品）、亞倫發芽的杖（已上傳到群組相簿），而你們並沒有找到你們的約櫃。
              現在請用你們所剩下的 500 元費用，在老街裡找到一個最適合你們的「約櫃容器」：
            </p>
            <ul>
              <li>小組共同討論並購買它</li>
              <li>將以上的東西放入這個約櫃裡面（亞倫發芽的杖不用放）</li>
              <li>因為約櫃需要特殊身份的人才能抬：請你們找一位路人幫你們拿著這個約櫃並與全組合照一張</li>
              <li>完成後將照片上傳群組</li>
            </ul>

            <h4>分數</h4>
            <ul>
              <li>先完成：60 分</li>
              <li>後完成：50 分</li>
            </ul>

            <!-- Video Insert -->
            <div style="margin-top: 16px; border-radius: 12px; overflow: hidden; border: 1px solid rgba(215,179,93,.25); box-shadow: 0 10px 30px rgba(0,0,0,.4);">
              <video controls playsinline preload="metadata" style="width: 100%; display: block; aspect-ratio: 16/9; background: #000;">
                <source src="media/約櫃影片製作與啟示.mp4" type="video/mp4">
                您的瀏覽器不支援影片播放。
              </video>
            </div>
          </div>
        </details>

        <!-- AB5 -->
        <details class="task" id="presence">
          <summary class="taskSum">
            <div class="taskLeft">
              <div class="taskIcon" aria-hidden="true">Ⅴ</div>
              <div class="taskTitleWrap">
                <div class="taskTitle">AB5 神的同在（最終）｜「與外人相會：一起建造一座教堂」</div>
                <div class="taskMeta">找非基督徒/店家/路人共同組教堂（7/8/9 階段由他完成）＋祝福禱告＋送出</div>
              </div>
            </div>
            <div class="taskRight">
              <div class="pill gold">先完成 +80</div>
              <div class="pill">後完成 +70</div>
              <div class="pill">做到一半 +50</div>
            </div>
          </summary>

          <div class="taskBody">
            <h4>開場宣告（可念）</h4>
            <p>
              「約櫃，從我們中間，走向城中」
              到目前為止，你們已經找回了約櫃裡的見證。你們立過約，在缺乏中彼此供應，扶起過正在承擔的人，也學會不用自己的方式抬約櫃。
              但約櫃的故事，從來不是停在會幕裡。
              在聖經中，神的同在不是為了被保存，而是為了被帶到人中間。
              今天最後一個任務，不是再完成一個關卡，而是讓神的同在，真的離開你們的手中，走向一個人。
            </p>

            <h4>最終任務</h4>
            <p>
              還記得一開始給你們的積木袋嗎？你們現在可以打開積木袋的說明書，你會看見當你完成這個積木會是一座小的教堂。
              你們今天的任務：把這個教堂「送出去」。
            </p>

            <h4>操作步驟（務必完整）</h4>
            <ul>
              <li>隨機找一位路人或店家，請他們協助你把這一個教堂組裝完成。</li>
              <li>組裝說明書上有 7、8、9 階段：這是他們要完成的部分。</li>
              <li>在組裝過程中：分別把 7、8、9 的流程裡面所代表的意義念給他們聽——這是一次很好傳福音的機會。</li>
              <li>最終與小教堂還有這位夥伴一同合照，上傳群組。</li>
              <li>並簡單的為他禱告，將這個小教堂送給他！</li>
            </ul>

            <h4>分數</h4>
            <ul>
              <li>先完成：+80 分</li>
              <li>後完成：+70 分</li>
              <li>完成到一半：+50 分</li>
            </ul>

            <div class="note">
              小提醒（讓你整場更安全也更有果效）：<br>
              1) 公共場域福音互動：一定要把「尊重」放在第一句，拒絕就走，這反而最像耶穌。<br>
              2) 別把路人當 KPI：把他當「人」。你們的態度本身就是福音。<br>
              3) 「一人一句話禱告」：祝福、不要審判；求平安、不要講罪（第一次接觸很重要）。
            </div>

            <!-- Video Insert -->
            <div style="margin-top: 16px; border-radius: 12px; overflow: hidden; border: 1px solid rgba(215,179,93,.25); box-shadow: 0 10px 30px rgba(0,0,0,.4);">
              <video controls playsinline preload="metadata" style="width: 100%; display: block; aspect-ratio: 16/9; background: #000;">
                <source src="media/製作約櫃啟示影片.mp4" type="video/mp4">
                您的瀏覽器不支援影片播放。
              </video>
            </div>
          </div>
        </details>

        <!-- AB6 -->
        <details class="task">
          <summary class="taskSum">
            <div class="taskLeft">
              <div class="taskIcon glow-icon" aria-hidden="true" style="background: linear-gradient(145deg, #b07a5a, #8d4f2a); box-shadow: 0 12px 30px rgba(176,122,90,.35); border: 1px solid rgba(255,255,255,0.1);">Ⅵ</div>
              <div class="taskTitleWrap">
                <div class="taskTitle">AB6 神的祝福｜「最後一日・信實與差遣」</div>
                <div class="taskMeta">最後的祝福語</div>
              </div>
            </div>
          </summary>

          <div class="taskBody">
            <p>你們今天不是完成了一場活動，而是一起走過一段屬靈的旅程。</p>
            <p>你們立過約，學習在關係中彼此守望；你們在限制與不確定中，相信神每天剛剛好的供應；你們看見生命如何在不容易中發芽、開花、結果；你們也學會了一件重要的事——不是用自己的方式，而是一起護送神的同在前行。</p>
            <p>但最重要的是，你們沒有把這一切留給自己。</p>
            <p>你們把神的同在，帶到了一位還不認識神的人面前，用陪伴、祝福與禱告，讓福音成為一個真實的相遇。</p>
            
            <h4>聖經提醒我們</h4>
            <p>「我要在那邊與你相會。」</p>
            <p>約櫃不是榮耀的象徵，而是神渴望與人同在的記號。</p>
            <p>神的同在，不是為了被保存，而是為了被帶到人中間。</p>
            
            <h4>願你們被這樣祝福</h4>
            <ul>
              <li>當你們迷惘時，記得立約同行，而不是憑感覺前進</li>
              <li>當你們缺乏時，記得神的供應每天夠用</li>
              <li>當你們疲累時，記得被揀選的人不該被消耗</li>
              <li>當你們帶領時，記得慢下來，彼此等候</li>
              <li>當你們走進世界時，記得神的同在願意與人相會</li>
            </ul>

            <h4>最後的祝福</h4>
            <p>願你們一生不只是尋找神的同在，而是真實地活在神的同在中。</p>
            <p>也願神的同在，因著你們，進入更多人的生命中。</p>

            <!-- Video Insert -->
            <div style="margin-top: 16px; border-radius: 12px; overflow: hidden; border: 1px solid rgba(215,179,93,.25); box-shadow: 0 10px 30px rgba(0,0,0,.4);">
               <video controls playsinline preload="metadata" style="width: 100%; display: block; aspect-ratio: 16/9; background: #000;">
                 <source src="media/聖經約櫃影片製作.mp4" type="video/mp4">
                 您的瀏覽器不支援影片播放。
               </video>
            </div>
          </div>
        </details>

      </div>
    </section>

    <!-- SCORE -->
    <section id="score">
      <div class="secHead">
        <h2>分數計算器（可選填，方便現場統計）</h2>
        <div class="tag">即時計分 · 比賽公平 · 自動加總</div>
      </div>
      <div class="secBody">
        <div class="panel">
          <p>
            下面提供 A/B 兩組快速計分（依你們現場判定：誰先完成、加分條件、照片缺/多等）。填完會自動算總分。
            ※ AB2（以物易物）：請直接勾選完成與否。
          </p>
        </div>

        <div class="scoreGrid">
          <div class="scoreBox">
            <h3>A 組分數</h3>
            <div class="fields">
              <div class="field">
                <label>AB1 是否先上傳？</label>
                <select id="a_ab1_first" data-task="c1">
                  <option value="0">否</option>
                  <option value="10">是（+10）</option>
                </select>
              </div>
              <div class="field">
                <label>AB1 額外盟約（總條數）</label>
                <input id="a_ab1_extra" data-task="c1" type="number" min="0" value="0" />
              </div>

              <div class="field">
                <label>AB2 以物易物完成狀態</label>
                <select id="a_ab2_win" data-task="c2">
                  <option value="0">未完成</option>
                  <option value="0">完成</option>
                </select>
              </div>

              <div class="field">
                <label>AB3 是否先完成？</label>
                <select id="a_ab3_first" data-task="c3">
                  <option value="50">否（50）</option>
                  <option value="60">是（60）</option>
                </select>
              </div>
              <div class="field">
                <label>AB3 照片總張數（目標 9）</label>
                <input id="a_ab3_photos" data-task="c3" type="number" min="0" value="9" />
              </div>

              <div class="field">
                <label>AB4 是否先完成？</label>
                <select id="a_ab4_first" data-task="c4">
                  <option value="50">否（50）</option>
                  <option value="60">是（60）</option>
                </select>
              </div>
              
              <div class="field">
                <label>AB5 完成程度</label>
                <select id="a_ab5_level" data-task="c5">
                  <option value="50">做到一半（+50）</option>
                  <option value="70">後完成（+70）</option>
                  <option value="80">先完成（+80）</option>
                </select>
              </div>

              <div class="field">
                <label>備註（可不填）</label>
                <input id="a_note" type="text" placeholder="例如：AB3 多拍 2 張加分…" />
              </div>
            </div>

            <div class="scoreLine">
              <span>合計</span>
              <strong id="a_total">0</strong>
            </div>
          </div>

          <div class="scoreBox">
            <h3>B 組分數</h3>
            <div class="fields">
              <div class="field">
                <label>AB1 是否先上傳？</label>
                <select id="b_ab1_first" data-task="c1">
                  <option value="0">否</option>
                  <option value="10">是（+10）</option>
                </select>
              </div>
              <div class="field">
                <label>AB1 額外盟約（總條數）</label>
                <input id="b_ab1_extra" data-task="c1" type="number" min="0" value="0" />
              </div>

              <div class="field">
                <label>AB2 以物易物完成狀態</label>
                <select id="b_ab2_win" data-task="c2">
                  <option value="0">未完成</option>
                  <option value="0">完成</option>
                </select>
              </div>

              <div class="field">
                <label>AB3 是否先完成？</label>
                <select id="b_ab3_first" data-task="c3">
                  <option value="50">否（50）</option>
                  <option value="60">是（60）</option>
                </select>
              </div>
              <div class="field">
                <label>AB3 照片總張數（目標 9）</label>
                <input id="b_ab3_photos" data-task="c3" type="number" min="0" value="9" />
              </div>

              <div class="field">
                <label>AB4 是否先完成？</label>
                <select id="b_ab4_first" data-task="c4">
                  <option value="50">否（50）</option>
                  <option value="60">是（60）</option>
                </select>
              </div>
              
              <div class="field">
                <label>AB5 完成程度</label>
                <select id="b_ab5_level" data-task="c5">
                  <option value="50">做到一半（+50）</option>
                  <option value="70">後完成（+70）</option>
                  <option value="80">先完成（+80）</option>
                </select>
              </div>

              <div class="field">
                <label>備註（可不填）</label>
                <input id="b_note" type="text" placeholder="例如：AB1 額外盟約 3 條…" />
              </div>
            </div>

            <div class="scoreLine">
              <span>合計</span>
              <strong id="b_total">0</strong>
            </div>
          </div>
        </div>

        <div class="btnRow">
          <button class="btn" id="resetScore" type="button">清除計分欄位</button>
          <button class="btn primary" id="copySummary" type="button">複製分數摘要（貼到群組）</button>
        </div>
      </div>
    </section>

    <footer>
      <div>© 尋回榮耀：重建約櫃之旅｜鶯歌陶匠之城篇</div>
      <div style="margin-top:6px;">提醒：尊重每一位路人；拒絕就走；態度就是福音。</div>
    </footer>

  </div>

  <script src="/socket.io/socket.io.js"></script>
  <script>
    // --- Global Vars ---
    const socket = io();
    let myTeamId = null; // 'A' or 'B'
    let isLogged = false;

    // --- UI References ---
    const loginModal = document.getElementById('loginModal');
    const loginMsg = document.getElementById('loginMsg');
    const btnLogin = document.getElementById('btnLogin');
    
    const pbar = document.getElementById('pbar');
    const pnum = document.getElementById('pnum');
    const oppBar = document.getElementById('oppBar');
    
    // Checkboxes
    const checks = Array.from(document.querySelectorAll('.check input[type="checkbox"]'));
    
    // Score Fields references
    const scoreFieldIds = [
      "a_ab1_first","a_ab1_extra","a_ab2_win","a_ab3_first","a_ab3_photos","a_ab4_first","a_ab5_level",
      "b_ab1_first","b_ab1_extra","b_ab2_win","b_ab3_first","b_ab3_photos","b_ab4_first","b_ab5_level",
      "a_note","b_note"
    ];

    // --- Login Logic ---
    btnLogin.addEventListener('click', () => {
      const teamId = document.getElementById('loginTeam').value;
      const password = document.getElementById('loginPass').value;
      if(!password) return;
      
      socket.emit('login', { teamId, password });
    });

    socket.on('loginError', (msg) => {
      loginMsg.textContent = msg;
    });

    socket.on('loginSuccess', ({ teamId }) => {
      myTeamId = teamId;
      isLogged = true;
      loginModal.style.display = 'none';
      
      // Update UI title or badge to show current team
      document.querySelector('.brand').innerHTML += `<span style="margin-left:5px; color:#d7b35d; border:1px solid #d7b35d; padding:2px; border-radius:4px; font-size:12px;">Team ${teamId}</span>`;
    });

    // --- State Sync Logic ---
    socket.on('stateUpdate', (allStates) => {
      if(!isLogged) return;

      const myState = allStates.find(s => s.teamId === myTeamId);
      const oppState = allStates.find(s => s.teamId !== myTeamId);

      if (myState) updateMyUI(myState);
      if (oppState) updateOppUI(oppState);
      
      // Always update global scoreboard using ALL data
      updateScoreboard(allStates);
    });

    function updateMyUI(state) {
      // 1. Progress Checkboxes
      state.progress.forEach((done, idx) => {
        if(checks[idx]) checks[idx].checked = done;
      });
      
      // 2. My Progress Bar
      const doneCount = state.progress.filter(b=>b).length;
      pnum.textContent = doneCount;
      pbar.style.width = (doneCount/5*100) + "%";
      
      // 3. Unlock/Lock checks based on sequence (Local UI logic)
      // (This is mostly visual, server validates too)
    }

    function updateOppUI(state) {
      // Opponent Progress Bar
      const doneCount = state.progress.filter(b=>b).length;
      oppBar.style.width = (doneCount/5*100) + "%";
    }
    
    function updateScoreboard(allStates) {
      // We map database fields to HTML IDs
      // Team A fields -> ids starting with "a_"
      // Team B fields -> ids starting with "b_"
      
      const teamA = allStates.find(s => s.teamId === 'A');
      const teamB = allStates.find(s => s.teamId === 'B');
      
      // Helper to fill fields
      const fill = (team, prefix) => {
        if(!team || !team.scoreFields) return;
        Object.keys(team.scoreFields).forEach(key => {
          // key matches the HTML id directly (e.g., "a_ab1_first")
          // Wait, server stores "a_ab1_first"? 
          // My server code: team.scoreFields[fieldId] = value;
          // fieldId sent from client is "a_ab1_first".
          // But "a_ab1_first" implies it belongs to A.
          // Correct.
          
          const el = document.getElementById(key);
          if(el) {
             // Avoid overwriting if user is currently typing?
             // For simple inputs, we just overwrite for sync.
             if(document.activeElement !== el) {
                el.value = team.scoreFields[key];
             }
          }
        });
      };

      if(teamA) fill(teamA, 'a');
      if(teamB) fill(teamB, 'b');
      
      // Recalculate Totals (Local Calc)
      renderTotals();

      // --- Access Control & Locking (Req 6 & 7) ---
      
      scoreFieldIds.forEach(id => {
        const el = document.getElementById(id);
        if(!el) return;
        
        const fieldBelongsTo = id.startsWith('a') ? 'A' : 'B';
        
        // Rule 1: You can only edit your own team's fields
        if(fieldBelongsTo !== myTeamId) {
          el.disabled = true;
        } else {
           el.disabled = false;
        }
        
        // Rule 2: Exclusivity Locks (Req 6)
        // If "First to Upload" is claimed by Opponent, My field is locked to "No"
        // We check specific pairs.
        checkLockPair(el, teamA, teamB);
      });
    }

    function checkLockPair(el, teamA, teamB) {
       // Logic: If I am A, and this is "a_ab1_first", check if B has "b_ab1_first" == "10".
       // If so, disable me and set to 0.
       
       if(!teamA || !teamB) return;
       const id = el.id;
       
       // AB1 First (Yes=10)
       if(id === 'a_ab1_first' && myTeamId === 'A') {
          if(getVal(teamB, 'b_ab1_first') == '10') { el.value = '0'; el.disabled = true; }
       }
       if(id === 'b_ab1_first' && myTeamId === 'B') {
          if(getVal(teamA, 'a_ab1_first') == '10') { el.value = '0'; el.disabled = true; }
       }

       // AB3 First (Yes=60)
       if(id === 'a_ab3_first' && myTeamId === 'A') {
          if(getVal(teamB, 'b_ab3_first') == '60') { el.value = '50'; el.disabled = true; }
       }
       if(id === 'b_ab3_first' && myTeamId === 'B') {
          if(getVal(teamA, 'a_ab3_first') == '60') { el.value = '50'; el.disabled = true; }
       }

       // AB4 First (Yes=60)
       if(id === 'a_ab4_first' && myTeamId === 'A') {
          if(getVal(teamB, 'b_ab4_first') == '60') { el.value = '50'; el.disabled = true; }
       }
       if(id === 'b_ab4_first' && myTeamId === 'B') {
          if(getVal(teamA, 'a_ab4_first') == '60') { el.value = '50'; el.disabled = true; }
       }
    }
    
    function getVal(teamState, key){
        return (teamState.scoreFields && teamState.scoreFields[key]) || "";
    }


    // --- Event Listeners (Emit to Server) ---

    // 1. Checkboxes
    checks.forEach((ch, idx) => {
      ch.addEventListener('click', (e) => {
        // Validation: Sequential Order
        if(ch.checked && idx > 0 && !checks[idx-1].checked) {
            e.preventDefault();
            alert("請按照順序完成任務！");
            return;
        }
        if(!ch.checked && idx < checks.length - 1 && checks[idx+1].checked) {
            e.preventDefault();
            alert("請先取消下一關！");
            return;
        }
        
        // Emit
        socket.emit('updateProgress', { teamId: myTeamId, index: idx, checked: ch.checked });
      });
    });

    // 2. Score Fields
    scoreFieldIds.forEach(id => {
      const el = document.getElementById(id);
      if(!el) return;
      
      el.addEventListener('change', () => {
         const val = el.value;
         
         // Special handling for "First" fields (Req 6)
         // If I am setting "Yes", I try to claim lock.
         // Simplified: Just update field. Server/Client sync will handle the lock via state update logic above.
         // If I set "10" here, I emit it.
         // If opponent already had "10", the next stateUpdate will see that and overwrite my "10" back to "0" (via checkLockPair).
         // Ideally we check BEFORE emit, but async is fine for this prototype.
         
         socket.emit('updateScoreField', { teamId: myTeamId, fieldId: id, value: val });
      });
      
      // Also emit text inputs on blur
      if(el.type === 'text' || el.type === 'number') {
         el.addEventListener('blur', () => {
             socket.emit('updateScoreField', { teamId: myTeamId, fieldId: id, value: el.value });
         });
      }
    });

    // --- Client Side Calc (Visual Only) ---
    // (Copied from original logic for rendering totals)
    function clampInt(v){ const n = parseInt(v,10); return isNaN(n) ? 0 : n; }
    function scoreAB1(first, extra){ return 50 + clampInt(first) + clampInt(extra)*5; }
    function scoreAB3(base, photo){ return clampInt(base) + (clampInt(photo)-9)*3; }
    function scoreAB4(base){ return clampInt(base); }
    function scoreAB2(v){ return clampInt(v); }
    function scoreAB5(v){ return clampInt(v); }

    function totalTeam(prefix){
      const el = (id) => { const e = document.getElementById(prefix+id); return e ? e.value : 0; };
      
      const ab1First = el("_ab1_first");
      const ab1Extra = el("_ab1_extra");
      const ab2Win   = el("_ab2_win");
      const ab3Base  = el("_ab3_first");
      const ab3Photos= el("_ab3_photos");
      const ab4Base  = el("_ab4_first");
      const ab5Level = el("_ab5_level");

      const s1 = scoreAB1(ab1First, ab1Extra);
      const s2 = scoreAB2(ab2Win);
      const s3 = scoreAB3(ab3Base, ab3Photos);
      const s4 = scoreAB4(ab4Base);
      const s5 = scoreAB5(ab5Level);
      return s1+s2+s3+s4+s5;
    }

    function renderTotals(){
      document.getElementById("a_total").textContent = totalTeam("a");
      document.getElementById("b_total").textContent = totalTeam("b");
    }

    // Smooth scroll
    document.querySelectorAll('a[href^="#"]').forEach(a=>{
      a.addEventListener('click', (e)=>{
        const id = a.getAttribute('href');
        const el = document.querySelector(id);
        if(!el) return;
        e.preventDefault();
        el.scrollIntoView({behavior:'smooth', block:'start'});
      });
    });

    // Reset Buttons (disabled for fairness, or could be admin only. Hiding for now to prevent accidents)
    document.getElementById('resetProgress').style.display = 'none';
    document.getElementById('resetScore').style.display = 'none';

  </script>
</body>
</html>
